/*
 Faz uma comunicação com um determininado host na rede, essa comunicação pode prosseguir, ou não.
   
 By Fabiano Santos


  */


#include<stdio.h>
#include<netdb.h>
#include<sys/socket.h>

int main(){

    int meusocket;
    int conecta;//Reliaza a conexão

    struct sockaddr_in alvo;// Estrutura responsável pela conexão com a internet

    meusocket = socket(AF_INET, SOCK_STREAM, 0);//AF_INET- Familia Arpanet Internet Protocol/* 0 é o protocolo ip*/ 
    alvo.sin_family = AF_INET;// A estrutura vai utilizar a familia AF_INET
    alvo.sin_port = htons(80);//Faz a comunicação com a porta 80 do alvo'
    alvo.sin_addr.s_addr = inet_addr("192.168.1.1");// Endereço do alvo da conexão

    conecta = connect(meusocket, (struct sockaddr *)&alvo, sizeof alvo);//Faz a conexão com o alvo

    /*Testa se a conexão foi bem sucedida com o alvo. Se retornar 0, a porta esta aberta,
     se retornar -1 a porta está fechada*/
    if(conecta == 0)
    {
         printf("Porta Aberta \n");
         close(meusocket);//Fecha o socket
         close(conecta);//Fecha o conecta
    }     
    else{
         printf("Porta Fechada \n");
    
    }



return 0;
}
